<html>

<head><meta name="description" content="江明勳"><meta name="keywords" content="江明勳">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
 
<title>嘰哩呱啦ACE--江明勳老師的網誌</title>
<base target="_blank">
</head>

<body>

<div align="center">
  <center>
  <table border="1" cellspacing="1" width="610" id="AutoNumber1">
    <tr>
      <td width="100%" bgcolor="#FFFFFF" style="border: 1px solid #FFFFFF">
      <img border="0" src="bg/DSCN3507.jpg" width="610" height="200"></td>
    </tr>
    <tr>
      <td width="100%" bgcolor="#444422" style="border: 1px solid #FFFFFF" height="30">
      <p align="center"><b><font color="#FFFFFF">
      20070523--嘰哩呱啦ACE--第168回--<font face="Arial Black">動態網頁模組的樹狀選單問題</font></font></b></td>
    </tr>
    <tr>
      <td width="100%" bgcolor="#BCBC78" style="border: 1px solid #FFFFFF">
      <ul>
        <li><a href="http://dyna.hcc.edu.tw/dyna/menu/index.php?account=dyna">
        動態網頁模組</a>，是新竹縣博愛國中曾琳富老師開發的一個架站套件，造福了許多人，感謝曾老師無私的分享。<br>
　</li>
        <li>我使用動態網頁模組已經有三年了，使用過程非常愉快，但偶爾會有一些小問題，在此將我遇到的問題和解決方法紀錄下來分享給需要的人。</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td width="100%" bgcolor="#C0C0C0" style="border: 1px solid #FFFFFF">
      <ul>
        <li>在94年我使用動態網頁模組架的一個網站，用當時來上資訊課時候發佈講義和回收學生作業之用。<br>
　</li>
        <li>下午 01:55 2007/4/25 由於想要找一些在該站上的資料，才發現一連過去會出現<font color="#FF0000">「您尚未申請使用 
        樹狀選單」</font>的錯誤訊息，因而無法進入。<br>
　</li>
        <li>上Google 用<font color="#FF0000">「您尚未申請使用 樹狀選單」</font>為關鍵字找看看有沒有人遇到跟我一樣的問題，結果<a href="http://dyna.hcc.edu.tw/dyna/menu/index.php?account=dyna">曾老師是這樣回答的</a><ul>
        <li>Q：網頁模組建好後，最近老師常發現出現錯誤訊息「您尚未申請使用 樹狀選單」，結果網頁就無法進入，有人知道問題如何解決嗎? </li>
        <li>A：請更新至94.11.11日版本，以後在刪除使用者就不會發生相同問題，但是對於已經發生的問題的帳號請您以瀏覽器執行<br>
        http://your ip/user/recover_lostmod.php 進行恢復! <br>
　</li>
      </ul>
        </li>
        <li>但在我使用的 93.10.10 版本中，找不到 /user/recover_lostmod.php 
        這個檔案，於是我從最新的動態網頁模組(95.10.10-02)Big5 版的原始程式中，有找到該檔案，然後複製到我的 93.10.10 
        版的動態網頁模組中，嘗試執行，結果失敗！<br>
　</li>
        <li>於是我打開 recover_lostmod.php找出錯的那一行<br>
        Parse error: parse error in /var/www/dyna/user/recover_lostmod.php on 
        line 116<br>
        用//註解後再執行，結果<br>
        Parse error: parse error in /var/www/dyna/user/recover_lostmod.php on 
        line 122<br>
　</li>
        <li>這讓我放棄曾老師建議的方式，改成自己去觀察 recover_lostmod.php的程式碼，我找到122行是<br>
        //設定樹狀選單<br>
        $myquery = &quot;insert into modmenu<br>
　</li>
        <li>所以我鎖定 modmenu 這個資料表來找出解決問題的方法，我用phpmyadmin進去看dyna 這個資料庫，發現欄位 fs_id = 
        9 的這個動態網頁明明之前已經被我殺掉了，竟然還存在！而 fs_id = 10 的動態網頁卻不見了！於是試著將fs_id 
        從9改成10，這樣就過了一關了！該動態網頁的樹狀選單出現了！<br>
　</li>
        <li>不過又出現另一個問題：<font color="#FF0000">您尚未申請使用 最新訊息 !</font><br>
        觀察 recover_lostmod.php 檔案裡的程式碼，我判斷「最新訊息」和「modnews」這個資料表有關，所以我用 
        phpmyadmin 進去dyna這個資料庫，點選「modnews」這個資料表，試著將fs_id 
        從9改成10，這樣就又過了一關了！該動態網頁的「最新訊息」出現了！<br>
　</li>
        <li>同理可證，其他的皆可如法炮製！以下僅列出相對應的資料表名稱<ul>
        <li>最新公告 modpub</li>
        <li>行事曆 modschedule</li>
        <li>留言版 modmsg</li>
        <li>相簿館 modalbum</li>
        <li>網網相連 modnetlink</li>
        <li>討論區 moddiscuss</li>
        <li>檔案櫃 modfiles</li>
        <li>投票區 modvote<br>
　</li>
      </ul>
        </li>
        <li>下午 02:25 2007/4/25 
        完成！剛好花了半個小時，不過如果有類似遭遇的人，看了我的這一篇解決方法，我想，應該十分鐘之內就可以解決您的問題吧！這就是分享的力量！<br>
　</li>
        <li>不過，如果我下次又刪除其他的動態網頁，會不會又會遇到同樣的問題？所以，我應該找出問題的根源！我想，應該是刪除使用者的的那四隻程式出問題<ul>
        <li>account_del.php</li>
        <li>account_del_bat.php</li>
        <li>account_del_bat_frm.php</li>
        <li>account_del_bat_in.php<br>
　</li>
      </ul>
        </li>
        <li>因此，我新增了三個帳號 test01、test02、test03，然後刪除掉 test02,結果 test01、test03 
        是正常的。所以，原因可能不是我想像的那樣，由於時間限制不再追查下去了，期待曾老師能抽空解答。</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td width="100%" bgcolor="#BCBC78" style="border: 1px solid #FFFFFF">
      <p align="left"><br>
      　<b><font color="#663300">　嘰哩呱啦ACE---江明勳老師的網誌</font></b></p>
      <ul>
        <li>本著作採用<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/tw/deed.zh_TW">創用 CC 「姓名標示─非商業性─相同方式分享 2.5」授權條款</a>。</li>
        <li>作者：南投縣永興國小江明勳老師 <a href="mailto:t03624@webmail.ntct.edu.tw">
        t03624@webmail.ntct.edu.tw</a> 
        </li>
        <li>歡迎提供意見或相關連結讓我修改本文</li>
        <li>過期文章請到 <a href="http://163.22.105.1/~james/glgl/">
        http://163.22.105.1/~james/glgl/</a> 觀看，不定期更新</li>
      </ul>
      </td>
    </tr>
    </table>
  </center>
</div>

</body>

</html>